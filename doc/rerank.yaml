openapi: 3.0.0
info:
  title: ReRank Service Interface
  version: 0.0.1
servers:
  - url: https://api.example.com/{api-version}
    variables:
      api-version:
        default: v1
security:
  - bearerAuth: []
  - trace: []

paths:
  /{api-version}/models:
    get:
      summary: List models.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        provider:
                          type: string
                        name:
                          type: string
              examples:
                model_list:
                  value:
                    - id: 9fadfda1-dcdf-4e4d-a42a-e158e54b4c4b
                      provider: "voyage"
                      name: "voyage-large-2"
                      dimension: 1536
                    - id: bd4f6262-a3b7-4dd1-9582-3ac182605cfb
                      provider: "openai"
                      name: "text-embedding-ada-002"
                      dimension: 1536
  /{api-version}/rerank:
    post:
      summary: Measure the relevance of a list of documents to a query.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                model_id:
                  type: string
                  description: The model id.
                documents:
                  type: array
                  items:
                    type: string
                  description: The list of documents.
                query:
                  type: string
                  description: The query.
              required:
                - model_id
                - documents
                - query
            examples:
              rerank:
                summary: Rerank documents with a query.
                value:
                  model_id: "bert-base-uncased"
                  documents:
                    - "The capital of France is Paris."
                    - "The capital of Italy is Rome."
                    - "The capital of Spain is Madrid."
                  query: "What is the capital of France?"
      responses:
        '201':
          description: The result of the rerank.
          content:
            application/json:
              schema:
                type: object 
                properties:
                  data:
                    type: array 
                    items:
                      $ref: "#/components/schemas/rerank_result"
              examples:
                rerank:
                  summary: Rerank documents with a query.
                  value:
                    data:
                      - text: "The capital of France is Paris."
                        score: 0.9
                        index: 0
                      - text: "The capital of Italy is Rome."
                        score: 0.8
                        index: 1
                      - text: "The capital of Spain is Madrid."
                        score: 0.7
                        index: 2
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
    trace:
      type: apiKey
      in: header
      name: MAOS-TRACE-ID
      description: The unique trace id.
  schemas:
    rerank_result:
      type: object
      properties:
        text:
          type: string
          description: The document.
        score:
          type: number
          description: The score of the document.
        index:
          type: integer
          description: The index of the document in the original list.